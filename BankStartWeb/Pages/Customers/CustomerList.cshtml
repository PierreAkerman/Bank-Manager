@page
@model BankStartWeb.Pages.Customers.CustomerListModel
@{
}

<section>
<div class="container mt-2">
    <div class="d-flex justify-content-between">
        <div class="p-2">
            <a class="btn btn-main-sm" asp-page="/Customers/New">New Customer</a>
        </div>

        <div class="mytitle title">
            <h1 >Customers</h1>
            <span class="border"></span>
        </div>

        <div class="p-2">
            <form class="d-flex justify-content-between" method="GET">
                <div>
                    <input class="form-control" asp-for="@Model.SearchWord" placeholder="Enter Name or City" />
                </div>
                <div>
                    <input class="btn btn-main-sm ml-1" type="submit" value="Search" />
                </div>
            </form>
        </div>
    </div>
    
    <style>
        .mytable {

            border-radius: 10px;
            margin-top: 20px;
        }
        .mytitle {
            padding: 0;
            margin: 0;
            margin-left: 75px;
        }
    </style>
    

    <div class="mytable">
    <table class="table table-striped table-hover">
        <tr>
        <th>Id 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord"  asp-route-col="Id" asp-route-order="asc" >
                <i class='bx bx-sort-a-z'></i></a> 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="Id" asp-route-order="desc" >    
                <i class='bx bx-sort-z-a'></i></a>
        </th>

        <th>National Id 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord"  asp-route-col="NationalId" asp-route-order="asc" >
                <i class='bx bx-sort-a-z'></i></a> 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="NationalId" asp-route-order="desc" >    
                <i class='bx bx-sort-z-a'></i></a>
        </th>

        <th>Name 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="Givenname" asp-route-order="asc" >
                <i class='bx bx-sort-a-z'></i></a> 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="Givenname" asp-route-order="desc" >    
                <i class='bx bx-sort-z-a'></i></a>

        </th>
        <th>Surname 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="Surname" asp-route-order="asc" >
                <i class='bx bx-sort-a-z'></i></a> 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="Surname" asp-route-order="desc" >    
                <i class='bx bx-sort-z-a'></i></a>

        </th>

        <th>Address
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="Streetaddress" asp-route-order="asc" >
                <i class='bx bx-sort-a-z'></i></a> 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="Streetaddress" asp-route-order="desc" >    
                <i class='bx bx-sort-z-a'></i></a>

        </th>

        <th>City 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="City" asp-route-order="asc" >
                <i class='bx bx-sort-a-z'></i></a> 
            <a asp-page="/Customers/CustomerList" asp-route-searchWord="@Model.SearchWord" asp-route-col="City" asp-route-order="desc" >    
                <i class='bx bx-sort-z-a'></i></a>
        </th>
        <th>Edit</th>

        @foreach (var customer in Model.Customers)
        {
            <tr>
                <td>@customer.Id</td>
                <td><a asp-page="/Customers/CustomerDetails" asp-route-customerid="@customer.Id">@customer.NationalId</a></td>
                <td>@customer.Givenname</td>
                <td>@customer.Surname</td>
                <td>@customer.Address</td>
                <td>@customer.City</td>
                <td><a asp-page="/Customers/Edit" asp-route-customerid="@customer.Id"><i class='bx bxs-edit'></i></a></td>
            </tr>
        }
    
        <tr>
            <td>
                @if (Model.PageNo > 1)
                {
                    <a asp-page="/Customers/CustomerList" asp-route-col="@Model.SortCol" asp-route-order="@Model.SortOrder" asp-route-searchWord="@Model.SearchWord" asp-route-pageno="@(Model.PageNo - 1)">Prev</a>
                }
            </td>

            <td colspan="5" style="text-align:center">Showing page @Model.PageNo of @Model.TotalPageCount</td>  @*TA BORT STYLE-TAG*@

            <td style="text-align:right">                                                                       @*TA BORT STYLE-TAG*@
                @if (Model.PageNo < Model.TotalPageCount)
                {
                    <a asp-page="/Customers/CustomerList" asp-route-col="@Model.SortCol" asp-route-order="@Model.SortOrder" asp-route-searchWord="@Model.SearchWord" asp-route-pageno="@(Model.PageNo + 1)">Next</a>
                }
            </td>
        </tr>
    </table>
</div>
</div>
</section>